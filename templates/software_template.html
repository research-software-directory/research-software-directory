{% extends "layout_template.html" %}
{%- block head -%}
    {{super()}}
    <title>{{template_data.name}} | Research Software Directory</title>
    <meta name="citation_title" content="{{template_data.name}}" />
    <meta name="citation_author" content="{{", ".join(template_data.contributor|listNamesFilter)}}" />
    <meta name="citation_publication_date" content="{{template_data.createdAt | strfdateFilter}}" />
    {% if template_data.doi %}<meta name="citation_doi" content="{{template_data.doi}}" />{% endif %}
    <meta property="description" content="{{template_data.shortStatement}}" />
    <meta property="og:title" content="{{template_data.name}}" />
    <meta property="og:description" content="{{template_data.shortStatement}}" />
    <meta property="og:url" content="https://www.research-software.nl/software/{{template_data.id}}" />
    <meta property="og:site_name" content="Research Software Directory" />
    <script src="https://cdn.plot.ly/plotly-latest.min.js" crossorigin="anonymous"></script>
    <script>
        var commitsData = {{ commits_data }};
    </script>
    <script type="text/javascript" src="{{url_for('static', filename='scripts/polyfills.js')}}"></script>
    <script type="text/javascript" src="{{url_for('static', filename='scripts/software_scripts.js')}}"></script>
    <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "https://www.research-software.nl",
          "name": "Research Software Directory"
        }
      },{
        "@type": "ListItem",
        "position": 2,
        "item": {
          "@id": "https://www.research-software.nl/software",
          "name": "Software"
        }
      },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "https://www.research-software.nl/software/{{template_data.id}}",
          "name": "{{template_data.name}}"
        }
      }]
    }
    </script>
    {% if template_data.id == 'boatswain' %}
    <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "SoftwareSourceCode",
            "codeRepository": "https://github.com/NLeSC/boatswain",
            "datePublished": "2018-01-16",
            "author": [{
                "@type": "Person",
                "givenName": "Berend",
                "familyName": "Weel",
                "affiliation": {
                    "@type": "Organization",
                    "legalName": "Netherlands eScience Center"
                }
            }, {
                "@type": "Person",
                "additionalName": "H.",
                "givenName": "Jurriaan",
                "familyName": "Spaaks",
                "affiliation": {
                    "@type": "Organization",
                    "legalName": "Netherlands eScience Center"
                }
            }],
            "keywords": ["docker", "docker-compose", "containers"],
            "license": "http://www.apache.org/licenses/LICENSE-2.0",
            "version": "1.0.2",
            "identifier": "https://doi.org/10.5281/zenodo.1149011",
            "name": "boatswain"
        }
    </script>
    {% endif %}


{%- endblock -%}
{%- block content -%}


<!-- Introduction -->
<section class="" id="introduction">
    <div class="container">
        <div class="row">
            <div class="col col-3-4">
                {% if template_data.name %}
                <h1 class="title name">{{template_data.name}}</h1>
                {% endif %}
                {% if template_data.contributor %}
                <div class="by">By <strong>{{", ".join(template_data.contributor|listNamesFilter)}}</strong></div>
                {% endif %}
                {% if template_data.contributingOrganization %}
                <div class="contributingOrganizationJoin">{{", ".join(template_data.contributingOrganization|listNamesFilter)}}</div>
                {% endif %}
                {% if template_data.shortStatement %}
                <div class="shortStatement">{{template_data.shortStatement}}</div>
                {% endif %}
            </div>

            <div class="col col-1-4">
                <div class="highlight-data">
                    {% if template_data.mentionCount > 0 %}
                        <div class="data">
                            <div class="num">{{template_data.mentionCount}}</div>
                            <div class="text">{{ 'mentions' if template_data.mentionCount>1 else 'mention' }}</div>
                        </div>
                    {% endif %}
                    <div class="data">
                        <div class="num">{{ template_data.contributorCount }}</div>
                        <div class="text">{{ 'contributors' if template_data.contributorCount>1 else 'contributor' }}</div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</section>


<!-- Get Started -->
<section class="bg-light" id="get-started">
    <div class="container">

        <div class="row">
            
            {% if template_data.mainUrl %}
            <div class="col col-1-4">
                <a href={{template_data.mainUrl}} target="_blank">
                    <div class="button button--big button--filled-blue">
                        <span class="button_text">Get started</span>
                        <span class="button_icon">
                            <svg class="icon" viewBox="0 0 15 15"><use xlink:href="{{url_for('static', filename='icons/icons.svg')}}#icon-external"></use></svg>
                        </span>
                    </div>
                </a>
            </div>
            {% endif %}

            <div class="col col-3-4 chart">

                {% if template_data.name %}
                <div class="software_commitsPlot" id="commitsPlot"></div>
                <div class="software_commitsStat" id="commitsStat"></div>
                {% endif %}

            </div>
        </div>

    </div>
</section>

{% if 'githubid' in template_data %}
<!-- Cite this software -->
<section id="cite-this">
    <div class="container">

        <div class="row bg-dark citation-block">

            <div class="col-1-3">
                <h2 class="subtitle">Cite this software</h2>
            </div>

            <div class="col-2-3 content">
                {% if template_data.doi %}
                    <div class="citation-block_doi">
                        <h5>DOI:</h5>
                        <div class="row">
                            <div class="doi_url">
                                <span class="gradient"></span>
                                <span id="doi">{{ template_data.doi }}</span>
                            </div>
                            <div class="button button--filled-blue copy" href="#">
                                <span><svg class="icon"><use xlink:href="{{url_for('static', filename='icons/icons.svg')}}#icon-clipboard"></use></svg></span>
                                <span class="text">Copy to clipboard</span>
                            </div>
                        </div>
                    </div>
                {% endif %}

                <div class="citation-block_download">
                    <h5>Choose a citation style:</h5>
                    <div class="row">
                        <div class="dropdown">
                            <div class="dropdown_button dropdown_button--light">
                                <span class="text">BibTeX</span>
                                <svg class="icon"><use xlink:href="{{url_for('static', filename='icons/icons.svg')}}#icon-chev-down"></use></svg>
                            </div>
                            <div class="dropdown_panel dropdown_panel--light">
                                <ul>
                                    <li data-download-url="/cite/{{template_data['id']}}?format=bibtex" class="is-active"><span class="inside"><span class="text">BibTeX</span></span></li>
                                    <li data-download-url="/cite/{{template_data['id']}}?format=enw"><span class="inside"><span class="text">EndNote .enw</span></span></li>
                                    <li data-download-url="/cite/{{template_data['id']}}?format=ris"><span class="inside"><span class="text">RIS</span></span></li>
                                </ul>
                            </div>
                        </div>
                        <a class="button button--filled-blue download" href="/cite/{{template_data['id']}}?format=bibtex" download>
                            <span><svg class="icon"><use xlink:href="{{url_for('static', filename='icons/icons.svg')}}#icon-download"></use></svg></span>
                            <span>Download file</span>
                        </a>
                    </div>
                </div>
            </div>                  
        </div>
    </div>
</section>
{% endif %}


<!-- About -->
<section class="" id="about">
    <div class="container">
        <div class="row">

            {% if template_data.statement %}
            <div class="statement col-3-4">
                <h2 class="subtitle text-blue">What {{template_data.name}} can do for you</h2>
                {{template_data.statement}}

                {% if template_data.readMore %}
                <div class="read-more">
                    <div class="read-more_content" style="height:0;">{{template_data.readMore}}</div>

                    <div class="read-more_button button button--outlined">
                        <span><svg class="icon"><use xlink:href="{{url_for('static', filename='icons/icons.svg')}}#icon-plus"></use></svg></span>
                        <span class="button_text">Read more</span>
                    </div>
                </div>
                {% endif %}

            </div>
            {% endif %}

            <div class="specifications col-1-4">
                <h5><svg class="icon"><use xlink:href="{{url_for('static', filename='icons/icons.svg')}}#icon-tag"></use></svg>Tags</h5>
                {% if template_data.tags %}
                <ul class="tags">
                    {% for tag in template_data.tags %}
                        <li class="bg-light">{{tag}}</li>
                    {% endfor %}
                </ul>
                {% else %}
                    <i>No tags available</i>
                {% endif%}


                <h5><svg class="icon"><use xlink:href="{{url_for('static', filename='icons/icons.svg')}}#icon-brackets"></use></svg>Programming Language</h5>
                <ul class="languages">
                    {% for language in template_data.programmingLanguage %}
                        <li>{{language}}</li>
                    {% endfor %}
                </ul>

                <h5><svg class="icon"><use xlink:href="{{url_for('static', filename='icons/icons.svg')}}#icon-paperclip"></use></svg>License</h5>
                <ul class="licenses">
                    {% for license in template_data.license %}
                    <li>{{license}}</li>
                    {% endfor %}
                </ul>
            </div>

        </div>

    </div>
</section>


<!-- Collaborations -->
{% if template_data.contributingOrganization %}
<section class="" id="collaborations">
    <div class="container">

        <div class="divider"></div>

        <div class="row">
            <div class="col-1-4">
                <h2 class="subtitle text-blue">In collaboration with</h2>
            </div>

            <div class="col-3-4 row contributing-organisations">
                {% for contributingOrganization in template_data.contributingOrganization %}
                <div class="organisation">
                {% if contributingOrganization.website %}
                    <a href="{{contributingOrganization.website}}" target="_blank">
                {% endif %}
                {% if organisation_logos[contributingOrganization.id] %}
                    <img src="{{url_for('static', filename='logos/'+organisation_logos[contributingOrganization.id])}}" alt="{{contributingOrganization.name}}">
                {% else %}
                    {{contributingOrganization.name}}
                {% endif %}
                {% if contributingOrganization.website %}
                    </a>
                {% endif %}
                </div>
                {% endfor %}
            </div>
        </div>
        
    </div>
</section>
{% endif %}


<!-- Mentions -->

{% if template_data.mentions %}
<section class="bg-dark" id="mentions">
    <div class="container">
        
        <div class="row">
            <div class="col-1-4">
                <h2 class="subtitle">Mentions</h2>
            </div>

            <div class="col-3-4">

                {% if template_data.corporateBlogs %}
                <a href="{{template_data.corporateBlogs[0].url}}" target="_blank" class="mention_blog-post row">
                    <div class="image-container">
                        <img src="{{ template_data.corporateBlogs[0].image }}">
                    </div>
                    <div class="data">
                        
                        <h3 class="title">{{ template_data.corporateBlogs[0].title }}</h3>
                        <p class="author">By {{ template_data.corporateBlogs[0].author }}</p>
                        <p class="date">{{ template_data.corporateBlogs[0]['datetime'] | strfdatehumanFilter }}</p>
                        
                        <div class="visit-blog text-underline">Visit our blog</div>
                    </div>
                </a>
                {% endif %}
                
                <div class="divider"></div>
                
                {% for key, value in template_data.mentions.items() %}
                <div class="mention">
                    <div class="mention_button">
                        <h3>
                            <span class="amount">{{value|length}}</span>
                            {% if key in mention_types %}
                            <span class="category">{{mention_types[key].singular if value|length == 1 else mention_types[key].plural}}</span>
                            {% else %}
                            <span class="category">{{key}}</span>
                            {% endif%}
                        </h3>
                        <svg class="icon"><use xlink:href="{{url_for('static', filename='icons/icons.svg')}}#icon-plus"></use></svg>
                    </div>
                    <div class="mention_list" style="height: 0">
                        <ul>
                        {% for item in value %}
                            <li>
                            {% if item.data.url %}

                            <a class="mention_content" href="{{item.data.url}}" target="_blank">
                                <div class="mention_title">{{item.data.title}} <svg class="icon"><use xlink:href="{{url_for('static', filename='icons/icons.svg')}}#icon-external"></use></svg></div> 
                                
                                <div class="mention_post-date">{{item.data.date}}</div>
                            </a>

                            {% else %}
                            <div class="mention_content">
                                <div class="mention_title">{{item.data.title}}</div> 
                                <div class="mention_post-date">{{item.data.date}}</div>
                            </div>
                            {% endif %}
                            </li>
                        {% endfor %}
                        </ul>
                    </div>

                    <div class="divider"></div>
                </div>
                {% endfor %}
            </div>
        </div>

        
    </div>    
</section>
{% endif %}


<!-- Projects -->
{% if template_data.corporateProjects | noNoneFilter %}
<section class="" id="projects">
    <div class="container">
        <div class="row">
            <div class="col-1-4">
                <h2 class="subtitle text-blue">Projects with {{template_data.name}}</h2>
            </div>
            <div class="col-3-4">
                {% if template_data.testimonial %}
                <div class="testimonial">
                    <blockquote>
                    {{template_data.testimonial}}
                    </blockquote>
                </div>

                <div class="testimonialby">
                    â€“ {{template_data.testimonialBy}}
                </div>
                {% endif %}

                <div class="row project-items">

                    {% for project in template_data.corporateProjects | noNoneFilter %}
                    <article class="project-item col-1-2">
                        <a href="{{project.url}}" target="_blank">
                            <div class="content">
                                <div class="thumb"><img src="{{project.image}}" alt=""></div>
                                <div class="text">
                                    <h2 class="text-blue">
                                        {{project.title}}
                                    </h2>
                                    <p>
                                        {{project.subtitle}}
                                    </p>
                                    <div class="author">
                                        <div class="author_name">
                                            {{(project.team | pickPIFilter).name}}
                                        </div>
                                        <div class="author_university">
                                            {{(project.team | pickPIFilter).affiliation}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </article>
                    {% endfor %}

                </div>
            </div>
        </div>
    </div>
</section>
{% endif %}



<!-- Contributors -->
<section class="bg-light" id="contributors">
    <div class="container">
        <div class="row">
            <div class="col col-1-4">
                <h2 class="subtitle text-blue">Contributors</h2>
            </div>
            <div class="col-3-4">

                <div class="row">

                    {% if template_data.contributor %}

                    {% if template_data.contributor|length > 6 %}
                    <div class="col col-2-3 contributors_list long-list">
                        <ul class="row">
                            <li style="width:100%" class="gradient gradient--gray"></li>

                    {% else %}
                    <div class="col col-2-3 contributors_list">
                        <ul class="row">     
                    {% endif %}

                            {% for contributor in template_data.contributor %}
                            <li class="col col-1-2">
                                <div class="contributor_name">    
                                    {% if contributor.linkedInUrl %}
                                    <a href="{{contributor.linkedInUrl}}" target="_blank">
                                        {{contributor.name}}
                                    </a>
                                    {% else %}
                                        {{contributor.name}}
                                    {% endif %}
                                </div>

                                <div class="contributor_organisation">{{contributor.organization}}</div>

                            </li>
                            {% endfor %}
                        </ul>
                        
                        {% if template_data.contributor|length > 6 %}
                        <div class="button button--filled-dark show-all-contributors">
                            <span><svg class="icon"><use xlink:href="/static/icons/icons.svg#icon-plus"></use></svg></span>
                            <span class="button_text">Show all contributors</span>
                        </div>
                        {% endif %}

                    </div>
                    
                    {% endif %}

                    {% if template_data.contactPerson %}
                    <div class="col col-1-3 contact_card">
                        <div class="contact_card_header">
                            Contact person
                        </div>
                        <div class="contact_card_content">
                            <div class="contributor_picture"><img
                                    {%- if template_data.contactPerson.image %}
                                        src="{{template_data.contactPerson.image }}" alt=""></div>
                                    {% else %}
                                        src="https://www.esciencecenter.nl/css/assets/team_default.png" alt=""></div>
                                    {% endif %}

                            <div class="contributor-info">
                                <div class="contributor_name">
                                    {% if template_data.contactPerson.website %}
                                    <a href="{{template_data.contactPerson.website}}" target="_blank">
                                        {{template_data.contactPerson.name}}
                                    </a>
                                    {% else %}
                                        {{template_data.contactPerson.name}}
                                    {% endif %}
                                </div>
                                <div class="contributor_organisation">{{template_data.contactPerson.organization}}</div>
                                <div class="contributor_email">
                                    <a href="mailto:{{template_data.contactPerson.email}}">
                                        <svg class="icon"><use xlink:href="/static/icons/icons.svg#icon-envelope"></use></svg>
                                        Mail {{template_data.contactPerson.name}}
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</section>


<!-- Related Tools -->
{% if template_data.related.software %}
<section class="" id="related-tools">
    <div class="container">
        <div class="row">
            <div class="col-1-4">
                <h2 class="subtitle text-blue">Related tools</h2>
            </div>
            <div class="col-3-4">
                <div id="software_list">
                    <div class="software_list_wrap">
                        
                        {% for tool in template_data.relatedSoftware %}
                        <a href="/software/{{tool.id}}" class="software_item bg-light">
                            <div class="code">{{tool.code}}</div>
                            <h2 class="name">{{tool.name}}</h2>
                            <p class="short">{{tool.shortStatement}}</p>
    
                            <div class="software_data">
                                <span class="last-update">{{tool.lastUpdateAgo}}</span>
                            </div>
                        </a>
                        {% endfor %}

                    </div>
                </div>
            </div>
        </div>
    </div>    
</section>
{% endif %}

{%- endblock -%}